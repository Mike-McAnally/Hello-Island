<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,shrink-to-fit=no,user-scalable=no,maximum-scale=1,minimum-scale=1">
    <title>Hello Island - Please Wait Heavy Graphic Loading (~ 1 min.): Fast Internet Required, Tethered VR Headset, Two Controllers.</title>
    <meta name="description" content="Hello Island includes a meeting area with four rooms and a roof, no doors, lo-res island exterior with sun, ocean and palm trees.  The island is currently timeless as the sun is frozen setting in the west.  Feel free to explore at your leisure.  Manifest through A-Frame WebXR technology. Created By: Michael McAnally July 30, 2020."></meta>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0, shrink-to-fit=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="gray-translucent" />

    <!-- A-frame component libraries, look them up on Github -->
    <script src="aframe-master/dist/aframe-v1.0.4.min.js"></script>
    <script src="aframe-extras-master/dist/aframe-extras.min.js"></script>
    <script src="aframe-environment-component-master/dist/aframe-environment-component.min.js"></script>
    <script src="superframe-master/components/thumb-controls/dist/aframe-thumb-controls-component.min.js"></script>
    
    <!-- upgrade the teleport contrls 
    <script src="aframe-teleport-controls-master/dist/aframe-teleport-controls.js"></script>
    -->
    <script src="aframe-teleport-controls-dependabot-npm_and_yarn-elliptic-6.5.3/dist/aframe-teleport-controls.min.js"></script>

    <!-- Add new teleport cursor control so those without headsets can teleport, but we don't use it right now  -->
    <script src="aframe-cursor-teleport-master/dist/aframe-cursor-teleport-component.min.js"></script>

    <script src="superframe-master/components/text-geometry/dist/aframe-text-geometry-component.min.js"></script>
    <script src="aframe-alongpath-component-master/dist/aframe-alongpath-component.min.js" ></script>
    <script src="aframe-curve-component-master/dist/aframe-curve-component.min.js"></script>
    <script src="aframe-lensflare-component-master/dist/aframe-lensflare-component.min.js"></script>

    <!-- Video Player Styling -->
    <style type="text/css">
      #video-permission {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          background: white;
          z-index: 10000;
          display: none;
      }
      #video-permission-button {
        position: fixed;
        top: calc(50% - 1em);
        left: calc(50% - 60px);
        width: 120px;
        height: 2em;
      }
    </style>

    <script type="text/javascript">
// Yes, I'm using some global variables here.
      var Speech = true;
      var audio1 = new Audio('assets/wav/action.wav');
      var audio2 = new Audio('assets/wav/swoosh.wav');

var playMusicSpeed = 1;
var rotation_speed = 15500;

var numberOfArrayDimension = 9;   //IMPORTANT: set to max number of first index of array dimension when adding a new array

var planets = ["forest", "yavapai", "contact", "egypt", "checkerboard", "goaland", "goldmine", "threetowers", "poison", "arches", "tron", "dream", "volcano", "starry", "osiris"];

var m = 1;  //counter to visit another planet  
var k = 15;  //counter to reset 18 objects visible again

var indexElement = 0;  //reset to array index

var counttx = 0, countup = true;

var nIntervId;

      // Royalty free sound effects for objects loaded
var squawk = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/duck.mp3');
var brea = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/horse.mp3');
var thrust = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/rocket.mp3');
var zap = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/raygun.mp3');
var flyscr = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/saucer.mp3');
var troar = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/trex.mp3');
var croar = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/ceratops.mp3');
var keysnd = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/keys.mp3');
var heartsnd = new Audio('https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/magical_sparkle.mp3');

// originally was part of a point system, now changed to informational notes when objects are shot.
function startPoints() {
    nIntervId = setInterval(fadePoints, 600);
}
 
function fadePoints()
{
  if (countup)
  {
    counttx = counttx + .10;
    if (counttx >= 1)
      countup = false;
  }
  else
  {
    counttx = counttx - .10;
    if (counttx <= 0)
      countup = true;
  }
  
  document.getElementById('Points').setAttribute('material', 'opacity: ' + counttx.toString());

}
 
function stopPoints() {

      document.getElementById('Points').setAttribute('material', 'opacity: 0');
      clearInterval(nIntervId);
}

      
      function speakInfo(narration) {
        var audio_msg = new SpeechSynthesisUtterance(narration);
        if (Speech === true) {
            window.speechSynthesis.speak(audio_msg);
        }
      }

      function changePlanet() {
          m = m + 1;
          if (m > planets.length)  { 
              m = -1;  //reset to array beginning
              document.getElementById('onplanet').setAttribute('active', 'false');
              // bring back the Island
              document.getElementById('The_Island').setAttribute('visible', 'true');
              return;
          }
        // change our environment, may pause play for a moment and redraw
        document.getElementById('The_Island').setAttribute('visible', 'false');
        document.getElementById('onplanet').setAttribute('active', 'true');
        document.getElementById('onplanet').setAttribute('environment', 'preset: ' + planets[m]);

      }

      // Shoot the looping objects
      function shoot_raygun(carousel_object) {

          switch(carousel_object) {

            case "flyingsaucer":
              saucer.play();
              document.getElementById('sittingDuckI').setAttribute('visible', false);
            break;

            default:

          }

      }


// royalty free sounds
function shoot_raygun(carousel_object) {

    if (indexElement > 5)  { 
        indexElement = 1;  //reset to array index
    }


  switch(carousel_object) {
    case "horse":
          startPoints();
          brea.play();
          // we will comment this out for now . . . until we can re-write to improve performance 
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[0][indexElement]);
        break;
    case "duck":
          startPoints();
          squawk.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[1][indexElement]);
        break;
    case "rocket":
          startPoints();
          thrust.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[2][indexElement]);
        break;
    case "raygun":
          startPoints();
          zap.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[3][indexElement]);
        break;
    case "saucer":
          startPoints();
          flyscr.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[4][indexElement]);
        break;
    case "trex":
          startPoints();
          troar.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[5][indexElement]);
        break;
    case "ceratops":
          startPoints();
          croar.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[6][indexElement]);
        break;
    case "heart":
          startPoints();
          heartsnd.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[7][indexElement]);
        break;
    case "key":
          startPoints();
          keysnd.play();
          // we will comment this out for now . . . until we can re-write to improve performance
          //document.getElementById('Points').setAttribute('text-geometry', 'value: ' + funFacts[8][indexElement]);
        break;
    default:

    }

    indexElement = indexElement + 1;


}


// Creates a multi-dimensional array

function createArray(length) {
    var arr = new Array(length || 0),
        i = length;

    if (arguments.length > 1) {
        var args = Array.prototype.slice.call(arguments, 1);
        while(i--) arr[length-1 - i] = createArray.apply(this, args);
    }

    return arr;
}


// create a large 2 dimensional global array
funFacts = createArray((numberOfArrayDimension + 1), 45);  // Note: first index in createArray is +1 more than the numberOfArrayDimension

// load array values
// Note: the 0 element is the object name

// horse
funFacts[0][0] = "Equus caballus: common name is\n Horse.";
funFacts[0][1] = "Horses can sleep both lying\n down and standing up.";
funFacts[0][2] = "Horses can run shortly after\n birth.";
funFacts[0][3] = "Horses have been domesticated\n for over 5000 years.";
funFacts[0][4] = "Horses have bigger eyes than\n any other mammal on land.";
funFacts[0][5] = "Horses have evolved from much\n smaller ancestors.";

// duck
funFacts[1][0] = "Anas platyrhynchos: common name\n is Duck.";
funFacts[1][1] = "A yellow rubber duck has achieved\n iconic status in western pop culture.";
funFacts[1][2] = "The rubber duck is symbolically\n linked with bathing.";
funFacts[1][3] = " ";
funFacts[1][4] = " ";
funFacts[1][5] = " ";

// rocket
funFacts[2][0] = "Rocket";
funFacts[2][1] = "The first rocket was invented by\n the Chinese around year 1200.";
funFacts[2][2] = "Rockets were originally used for\n fireworks and for rescuing people at sea.";
funFacts[2][3] = "Robert Goddard is considered the father\n of modern rocketry. He built the first\n liquid-fueled rocket in 1926.";
funFacts[2][4] = "A typical rocket produces more than a\n million pounds of thrust.";
funFacts[2][5] = "Launch rockets are actually several\n rockets linked together.";

// raygun
funFacts[3][0] = "Raygun";
funFacts[3][1] = "A raygun is a science fiction particle-beam\n weapon that fires what is usually destructive energy.";
funFacts[3][2] = "They have various alternate names:\n ray gun, death ray, beam gun, blaster,\n laser gun, laser pistol, phaser, zap gun, etc.";
funFacts[3][3] = "A very early example of a raygun is\n the Heat-Ray featured in H. G. Wells'\n novel The War of the Worlds (1898).";
funFacts[3][4] = "Science fiction during the 1920s\n described death rays.";
funFacts[3][5] = " ";

// saucer
funFacts[4][0] = "Flying Saucer";
funFacts[4][1] = "The term UFO for Unidentified Flying\n Object was coined by US Air Force officer\n Edward Ruppelt in 1952.";
funFacts[4][2] = "Between 1947 and 1969, 12,618 UFO\n sightings were reported to Project\n Blue Book.";
funFacts[4][3] = "In Roswell, New Mexico on July 8th of 1947,\n an information office publicized the recovery\n of a crashed flying disc.";
funFacts[4][4] = "The book Flying Saucers from Outer Space,\n written by author Donald E. Keyhoe in\n 1953, used the term UFO.";
funFacts[4][5] = " ";

// trex
funFacts[5][0] = "Tyrannosaurus";
funFacts[5][1] = "Tyrannosaurus commonly refered to\n as T-Rex";
funFacts[5][2] = "A person who studies dinosaurs\n is called a paleontologist.";
funFacts[5][3] = "Dinosaurs lived on earth until\n 65 million years ago.";
funFacts[5][4] = " ";
funFacts[5][5] = " ";
        
// ceratops
funFacts[6][0] = "Triceratops";
funFacts[6][1] = "Modern birds descended from a group\n of two-legged dinosaurs known as theropods.";
funFacts[6][2] = "Scientist believe dinosaurs became\n extinct after a large metior impacted\n the earth.";
funFacts[6][3] = " ";
funFacts[6][4] = " ";
funFacts[6][5] = " ";

// Heart
funFacts[7][0] = "heart";
funFacts[7][1] = " ";
funFacts[7][2] = " ";
funFacts[7][3] = " ";
funFacts[7][4] = " ";
funFacts[7][5] = " ";

// key
funFacts[8][0] = "key";
funFacts[8][1] = " ";
funFacts[8][2] = " ";
funFacts[8][3] = " ";
funFacts[8][4] = " ";
funFacts[8][5] = " ";

function changeSpeed() {
    if (rotation_speed < 5700) {
        rotation_speed = 15500;
    }
    rotation_speed = rotation_speed - 2100;
    document.getElementById('sittingDuckA').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckB').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckC').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckD').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckE').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckF').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckG').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckH').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckI').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckJ').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckK').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckL').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckM').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckN').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckO').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckP').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    document.getElementById('sittingDuckQ').setAttribute('alongpath', 'dur: ' + rotation_speed.toString());
    playMusicSpeed = playMusicSpeed + 0.065;   
    playSpeed = document.getElementById('playAudio');
    playSpeed.playbackRate = playMusicSpeed;
}

// Component to do on click.
AFRAME.registerComponent('cursor-listener', {
  init: function () {

    this.el.addEventListener('click', function (evt) {
    //count down the objects
    k = k - 1;

    if (k < 1)  { 
        k = 15;  //reset to beginning
        playMusicSpeed = 1;
        playSpeed = document.getElementById('playAudio');
        playSpeed.playbackRate = playMusicSpeed;

        //return all 15 objects to view
        document.getElementById('sittingDuckA').setAttribute('visible', true);
        document.getElementById('sittingDuckB').setAttribute('visible', true);
        document.getElementById('sittingDuckC').setAttribute('visible', true);
        document.getElementById('sittingDuckD').setAttribute('visible', true);
        document.getElementById('sittingDuckE').setAttribute('visible', true);
        document.getElementById('sittingDuckF').setAttribute('visible', true);
        document.getElementById('sittingDuckG').setAttribute('visible', true);
        document.getElementById('sittingDuckH').setAttribute('visible', true);
        document.getElementById('sittingDuckI').setAttribute('visible', true);
        // spinning hearts
        document.getElementById('sittingDuckK').setAttribute('visible', true);
        document.getElementById('sittingDuckL').setAttribute('visible', true);
        document.getElementById('sittingDuckM').setAttribute('visible', true);

        document.getElementById('sittingDuckO').setAttribute('visible', true);
        document.getElementById('sittingDuckP').setAttribute('visible', true);
        document.getElementById('sittingDuckQ').setAttribute('visible', true);
    
        changeSpeed();

    } else {

        // remove clicked object from view
        this.setAttribute('visible', false);

    }

    });
  }
});


function playSound() {

//alert("TEST Sound playing functional!!!");
}



      //   Solves Google mute of audio problem https://stackoverflow.com/questions/47921013/play-sound-on-click-in-a-frame?answertab=active#tab-top
      AFRAME.registerComponent('audiohandler', {
        init:function() {
            let playing = false;
            let audio = document.querySelector("#playAudio");
            this.el.addEventListener('click', () => {

                if(!playing) {
                    audio.play();
                } else {
                    audio.pause();
                    audio.currentTime = 0;
                }
                playing = !playing;
            });
        }
      })

      function playBlip() {
        audio1.play();
      }

  </script>

</head>

<body>
    <div id="video-permission">
      <button id="video-permission-button">Allow VR Video</button>
    </div>
    <!-- I like the sound of this fun, joyful Carnival Banna tune for game: this "Royalty Purchase" for 10,000 downloads -->
    <button id="playButton" type="button">Play Music</button>
    <audio id="playAudio" autoplay loop>
        <source src="https://rocketvirtual.com/A-Frame_WebXR/assets/mp3/Carnival_Banana.mp3" type="audio/mpeg">
    </audio>

    <a-scene background="color: #FAFAFA" raycaster="objects: .clickable" >
        <a-assets timeout="40000">
              <a-asset-item id="Building" src="assets/gltf/New_Building_final1.glb" nav-agent="speed: 1.5; active: true"></a-asset-item>
              <a-asset-item id="Building_skeleton" src="assets/gltf/New_Building_final_skeleton1.glb" nav-agent="speed: 1.5; active: true"></a-asset-item>
              <a-asset-item crossorigin="anonymous" id="Island" src="assets/gltf/Islands.glb"></a-asset-item>
              <a-asset-item crossorigin="anonymous" id="Palm" src="assets/gltf/PalmMinimal.glb"></a-asset-item>
              <a-asset-item id="horse" src="assets/gltf/Horse_Free.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="rocket" src="assets/gltf/rocket4.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="raygun" src="assets/gltf/raygun4/raygun.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="flyingsaucer" src="assets/gltf/FlyingSaucer/fsaucer.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="trex" src="assets/gltf/Trex_base_mesh.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="triceratops" src="assets/gltf/Triceratops_base_mesh.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="duck" src="assets/gltf/Duck.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="key" src="assets/gltf/Key.glb" shadow="receive: false"></a-asset-item>
              <a-asset-item id="heart" src="assets/obj/heart_lp.obj/heart_lp.obj" shadow="receive: false"></a-asset-item>
              <img crossorigin="anonymous" id="flare-asset" src="assets/img/adjustflare.jpg">
              <img crossorigin="anonymous" src="assets/img/play2.png" id="play" >
              <img crossorigin="anonymous" src="assets/img/pause.png" id="pause" >
              <img crossorigin="anonymous" src="assets/img/volume-normal.png" id="volume-normal" >
              <img crossorigin="anonymous" src="assets/img/volume-mute.png" id="volume-mute" >
              <img crossorigin="anonymous" src="assets/img/seek-back.png" id="seek-back" >
              <img crossorigin="anonymous" id="grid" src="assets/img/opaic_grid.png">
              <!-- Music Box -->
              <img crossorigin="anonymous" id="music-image_on" src="assets/img/music.png">
              <!-- Planet Box -->
              <img crossorigin="anonymous" id="planet_cntl-image" src="assets/img/planets.png">
              <!-- Our Font -->
              <a-asset-item id="optimer_bold" src="assets/fonts/optimer_bold.typeface.json"></a-asset-item>
              <!-- Our Video Stream -->
              <video crossorigin="anonymous" id="video-src" src="assets/video/MP_beach.mp4"></video>
        </a-assets>

      <!-- Basic movement, selection and teleportation  -->
      <a-entity id="navmesh-Island" gltf-model="url(assets/gltf/navmeshMegaHelloIsland.gltf)" scale="" visible="false" nav-mesh=""></a-entity>
      <a-entity id="cameraRig" movement-controls="constrainToNavMesh: true;" navigator="cameraRig: #cameraRig; cameraHead: #head; collisionEntities: .collision; ignoreEntities: .clickable" position="0 0 0" rotation="0 0 0">
        <!-- camera -->
        <a-entity id="head" camera="active: true" position="0 1.6 0" look-controls="pointerLockEnabled: true; reverseMouseDrag: true" ></a-entity>

        <a-entity class="leftController" hand-controls="hand: left; handModelStyle: lowPoly; color: #15ACCF" tracked-controls vive-controls="hand: left" oculus-touch-controls="hand: left" windows-motion-controls="hand: left" teleport-controls="cameraRig: #cameraRig; teleportOrigin: #head; button: trigger; curveShootingSpeed: 18; collisionEntities: #navmesh-Island; landingMaxAngle: 60" visible="true">
               <!-- This is where we output text   --> 
               <a-entity id="Points" text-geometry="value: Right trigger selects,Left teleports,Thumbstick moves. Simple Game on roof.; font: #optimer_bold; bevelEnabled: false; curveSegments: 12; size: .75; height: 0;" material="color:blue; metalness:1; roughness: 0; transparent: false; opacity: 1" position="-.4 -.1 -.4" scale=".03 .03 .03" ></a-entity>

        </a-entity>
         
        <a-entity class="rightController" hand-controls="hand: right; handModelStyle: lowPoly; color: #15ACCF" tracked-controls vive-controls="hand: right" oculus-touch-controls="hand: right" windows-motion-controls="hand: right" laser-controls raycaster="showLine: true; far: 15; interval: 0; objects: .clickable, a-link;" line="color: lawngreen; opacity: 0.5" visible="true"></a-entity>

                                            

      </a-entity>

        <!-- Create changeable environment  -->
        <a-entity id="onplanet" active="false"></a-entity>

        <!-- Island terrain -->
      	<a-entity id="The_Island" gltf-model="#Island" position="-29.71322 -5.19691 23.18321" scale="75 75 75" visible="true" shadow></a-entity>

      	<!-- Ocean -->
      	<a-ocean position="-28.98488 -1.76439 22.54954" scale="3 3 3" width="50" depth="50" opacity=".75" ocean="density: 45; amplitude: -0.1; speed: 0.75; speedVariance: 0.1"></a-ocean>

      	<!-- Sky -->
      	<a-sky color="#55D6F6"></a-sky>

      	<!-- Place the Sun -->
      	<a-sphere id="flare" radius="0.05" color="yellow" lensflare="createLight:false; relative: true; src: #flare-asset; position:-109.093 10.428 -46.857; lightColor:yellow; intensity: 5; lightDecay: 500" position="-109.093 10.428 -46.857"></a-sphere>

      	<!-- Palm Trees These are a little heavy, but they really look nice...        -->
      	<a-entity id="Palm_Tree1" gltf-model="#Palm" position="-60.19575 -0.18477 -20.35598" rotation="0 0 0" scale=".002 .003 .002" shadow></a-entity>

     	  <a-entity id="Palm_Tree2" gltf-model="#Palm" position="-14.97217 -0.76341 -16.69816" rotation="-3.741 111.923 9.209" scale=".002 .003 .002" shadow></a-entity>

      	<a-entity id="Palm_Tree3" gltf-model="#Palm" position="-22.06368 -0.1212 -35.6895" rotation="-3.285 61.159 11.798" scale=".002 .002 .002" shadow></a-entity>

      	<a-entity id="Palm_Tree4" gltf-model="#Palm" position="-29.31117 -0.40163 1.87876" rotation="0 78.26 0" scale=".002 .003 .002" shadow></a-entity>

        <a-entity id="Meeting_Structure" gltf-model="#Building" position="-10 0.015 12" rotation="0 0 0" scale="0.019 0.019 0.019" shadow=""></a-entity>

        <!-- Small Terrain Map On Wall    -->
      	<a-entity id="Islands_small_map" gltf-model="#Island" position="0.64705 1.66753 3.31628" rotation="-89.87473270201606 123.19623919343935 -125.19586189844593" scale="0.806 1.0 0.806" shadow visible=""></a-entity>

        <a-entity position="0.98109 0.6562 3.31628" rotation="0.000 176.741 0.000" scale="0.2 0.2 0.2" text-geometry="value: Hello Island"></a-entity>

        <a-entity id="Meeting_Structure_skeleton" gltf-model="#Building_skeleton" position="0.84773 1.5403 3.25326" rotation="-89.87473270201606 123.19623919343935 -125.19586189844593" scale="0.00019 0.00019 0.00019" shadow=""></a-entity>

        <!-- Bridges allowing us to move around the island.  -->
        <a-box id="bridge-1" position="-51.02139 -0.46314 12.85726" rotation="-90 -52.796 0" scale="1 2.532 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>   
        <a-box id="bridge-2" position="-48.48011 -0.84417 -23.91551" rotation="-90 0 0" scale="4.304 1 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-3" position="-15.68861 4.7949 25.79727" rotation="-75.752 112.335 -91.715" scale="5.080 1 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-4" position="-22.05395 -1.17116 53.22061" rotation="-90 6.825 0" scale="1.721 1 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-5" position="-47.94579 -0.10505 68.83707" rotation="-90 0 0" scale="1 1 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-6" position="-12.30953 -0.34999 35.37341" rotation="-90 0 0" scale="1 1.854 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>      
        <a-box id="bridge-7" position="-20.82265 -0.29084 -0.3377" rotation="-90 0 0" scale="4.504 0.868 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-8" position="16.2233 -0.53012 11.56199" rotation="-90 0 0" scale="1 1.854 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="bridge-9" position="-3.59464 3.156 16.24416" rotation="-69.518 1.707 -91.206" scale="3.066 1 0.143" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>

        <!-- Teleport Steps for Game on Roof   -->
        <a-box id="step1" position="-9.49384 10.65874 -4" rotation="-90 0 0" scale="1 1 0.025" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="step2" position="-8.68694 13.21591 1.32841" rotation="-90 0 0" scale="1 1 0.025" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="step3" position="11.86778 14.854 -6.674" rotation="-90 0 0" scale="1 1 0.025" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="step4" position="11.6605 18.203 4.07542" rotation="-90 0 0" scale="1 1 0.025" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>
        <a-box id="step5" position="2.477 20.74 -12.99593" rotation="-90 0 0" scale="1 1 0.025" width="4" height="4" color="#FFFFFF" shadow="receive: true" material="src: #grid; opacity: 1;" ></a-box>

    <!-- Setup tracs A-I for the carousel.  Not a true circle, but it works...  Varying the y-axis for height in air of object following trac.  Could be more complex tracks in the future. -->

    <a-curve id="tracA" >
        <a-curve-point position="0 8 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 8 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="7 8 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 8 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 8 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 8 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-8 8 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 8 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 8 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracB" curve="">
        <a-curve-point position="0 7 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 7 4" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-8 7 10" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 7 15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 7 17" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 7 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="7 7 10" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 7 5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 7 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracC" curve="">
        <a-curve-point position="12 13 11" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 13 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="10 13 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 13 -1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 13 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 13 7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="1 13 12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 13 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="12 13 11" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracD" curve="">
        <a-curve-point position="9 27 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="3 27 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="1 27 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 27 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 27 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 27 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="16 27 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="14 27 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 27 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracE" curve="">
        <a-curve-point position="0 8 -12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 8 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="0 8 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="6 8 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="9 8 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="13 8 -4" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="13 8 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="8 8 -14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 8 -12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracF" curve="">
        <a-curve-point position="7 21 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="5 21 -15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="0 21 -17" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-6 21 -15" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-8 21 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 21 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="3 21 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="7 21 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>

    <a-curve id="tracG" curve="">
        <a-curve-point position="1 31 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-3 31 -13" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-11 31 -13" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-14 31 -9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-13 31 -2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-7 31 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-3 31 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="0 31 -3" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="1 31 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracH" curve="">
        <a-curve-point position="-2 17 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 17 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-10 17 -7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-15 17 -5" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-17 17 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-15 17 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-10 17 8" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-4 17 6" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-2 17 0" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>


    <a-curve id="tracI" curve="">
        <a-curve-point position="-12 8 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-14 8 9" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-9 8 14" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-1 8 12" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="1 8 7" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-1 8 2" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>  
        <a-curve-point position="-6 8 -1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
        <a-curve-point position="-12 8 1" geometry="height:0.1;width:0.1;depth:0.1" material="color:#ff0000" curve-point="" visible="false"></a-curve-point>
    </a-curve>



    <!-- objects following the trac.  Letter A-I corresponds to trac curve above.  Collada and glTF objects loaded here... Note: All objects are royalty free and/or created by me. -->


    <a-entity id="sittingDuckA" class="clickable" gltf-model="#horse" alongpath="curve:#tracA;loop:true;dur:15500;rotate:true" scale="" position="-4.27 1 -6" shadow="receive:false" rotation="-24 -90 90" onclick="stopPoints();shoot_raygun('horse');" cursor-listener></a-entity>

    <a-entity id="sittingDuckB" class="clickable" gltf-model="#duck" alongpath="curve:#tracB;loop:true;dur:15500;rotate:true" position="4.29 1 15.43" shadow="receive:false" rotation="0 261.96 0" scale="1 1 1" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('duck');" cursor-listener></a-entity>

    <a-entity id="sittingDuckC" class="clickable"  gltf-model="#key" alongpath="curve:#tracC;loop:true;dur:15500;rotate:true" position="-1.77 1 5.17" shadow="receive:false" rotation="-7.28 -89.07 82.71" scale="1.3 1.3 1.3" onclick="stopPoints();shoot_raygun('key');" cursor-listener></a-entity>

    <a-entity id="sittingDuckD" class="clickable" gltf-model="#flyingsaucer" alongpath="curve:#tracD;loop:true;dur:15500;rotate:true" position="12.44 1 7.12" shadow="receive:false" rotation="0 261.96 0" scale="4.5 4.5 4.5" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" onclick="stopPoints();shoot_raygun('saucer');" cursor-listener></a-entity>

    <a-entity id="sittingDuckE" class="clickable" gltf-model="#horse" scale="" alongpath="curve:#tracE;loop:true;dur:15500;rotate:true" position="11.90 1 -2.37" shadow="receive:false" rotation="0 138.07 0" onclick="stopPoints();shoot_raygun('horse');" cursor-listener></a-entity>

    <a-entity id="sittingDuckF" class="clickable" gltf-model="#trex" alongpath="curve:#tracF;loop:true;dur:15500;rotate:true" position="-7.92 1 -8.56" shadow="receive:false" rotation="0 13.05 0" animation__rotate="property:rotation;dur:3000;easing:linear;loop:true;from:0 0 0;to:0 360 0" scale="1 1 1" onclick="stopPoints();shoot_raygun('trex');" cursor-listener></a-entity>

    <a-entity id="sittingDuckG" class="clickable" gltf-model="#triceratops" alongpath="curve:#tracG;loop:true;dur:15500;rotate:true" position="-9.22 1 0.45" shadow="receive:false" rotation="0 70.51 0" scale="0.35 0.35 0.35" onclick="stopPoints();shoot_raygun('ceratops');" cursor-listener></a-entity>

    <a-entity id="sittingDuckH" class="clickable" gltf-model="#rocket" alongpath="curve:#tracH;loop:true;dur:15500;rotate:true" position="-16.13 1 4.16" shadow="receive:false" rotation="0 23.64 0" scale="3.5 3.5 3.5" onclick="stopPoints();shoot_raygun('rocket');" cursor-listener></a-entity>

    <a-entity id="sittingDuckI" class="clickable" gltf-model="#raygun" scale="" alongpath="curve:#tracI;loop:true;dur:15500;rotate:true" position="0.98 1 6.65" shadow="receive:false" rotation="0 -175.74 0" onclick="stopPoints();shoot_raygun('raygun');" cursor-listener></a-entity>

<!-- stationary hearts -->


    <a-obj-model id="sittingDuckK" class="clickable" position="2.5 11.6 -8" scale="0.02 0.02 0.02" src="#heart" material="color: #F585D3"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>
    <a-obj-model id="sittingDuckL" class="clickable" position="1.5 11.6 -8" scale="0.03 0.03 0.03" src="#heart" material="color: #B876F6"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>   
    <a-obj-model id="sittingDuckM" class="clickable" position="0.1 11.6 -8" scale="0.04 0.04 0.04" src="#heart" material="color: #E9EDF8"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>

    <a-obj-model id="sittingDuckO" class="clickable" position="2.5 8.6 -6" scale="0.02 0.02 0.02" src="#heart" material="color: #F44268"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>
    <a-obj-model id="sittingDuckP" class="clickable" position="1.5 8.6 -6" scale="0.03 0.03 0.03" src="#heart" material="color: #F44268"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>   
    <a-obj-model id="sittingDuckQ" class="clickable" position="0.1 8.6 -6" scale="0.04 0.04 0.04" src="#heart" material="color: #F44268"
       animation__rotate="property: rotation; dur: 15500; easing: linear; loop: true; to: 0 360 0" shadow="receive:false" onclick="stopPoints();shoot_raygun('heart');" cursor-listener></a-obj-model>


        <!-- This lets us play music if browser allows it, enable audio  -->
        <a-box id="playButton" class="clickable" animation="property: rotation; dur: 50000; fill: forward; to: 0 360 0; repeat: indefinite" position="-3.83 6.9189 -3.194" rotation="-27.121 0 0" material="src: #music-image_on" scale="0.25 0.25 0.25" onclick="playBlip();" audiohandler shadow ></a-box>

        <!-- Create a clickable change/toggle enviroment box button just for fun! -->
        <a-box id="planetButton" class="clickable" animation="property: rotation; dur: 50000; fill: forward; to: 0 360 0; repeat: indefinite" position="3.4758 7.56943 -2.11425" rotation="-27.121 0 0" material="src: #planet_cntl-image" scale="0.25 0.25 0.25" onclick="changePlanet();" shadow ></a-box>
      	<!-- Light 1 -->
      	<a-light type="ambient" position="-83.68534 30.81376 -20.81553" color="white" light="type: hemisphere; intensity: 0.50" visible=""></a-light>

      	<!-- Shadow Camera -->
      	<a-entity class="environment" position="-107.399 55.573 -10.162" light="intensity: 0.75; castShadow: true; shadowCameraLeft: -95; shadowCameraBottom: -95; shadowCameraRight: 95; shadowCameraTop: 95; shadowRadius: 50; shadowCameraFar: 100; shadowCameraNear: 1" visible=""></a-entity>

    <!-- Controls for display of video screen, seems to work nicely, javascript below </scene> tag below -->
     
          <!-- MEDIAS HOLDER -->
          <a-sound id="alert-sound" src="src: url(assets/wav/action.wav)" autoplay="false" position="0 0 0"></a-sound>
          <a-video id="video-screen" src="#video-src" position="-0.02132 1.89195 -3.56798" rotation="0 0 0" scale="0.50761 0.49394 1" width="8" height="4" rotation="0 0 0" visible="true"></a-video>
          <!-- END MEDIAS HOLDER -->

          <!-- CONTROLS -->
          <a-image class="clickable" id="control-back" width="0.4" height="0.4" src="#seek-back" position="-0.42425 0.565 -3.47602" rotation="0 1.2570694025170261 0" visible="false" scale="0.85 0.85 0.85"></a-image>
          <a-image class="clickable" id="control-play" width="0.4" height="0.4" src="#play" position="-0.00457 0.565 -3.47602" rotation="0 1.2570694025170261 0"></a-image>
          <a-image class="clickable" id="control-volume" width="0.4" height="0.4" src="#volume-mute" position="0.38786 0.565 -3.47602" rotation="0 1.2570694025170261 0" visible="false" scale="0.75 0.75 0.75"></a-image>
          <!-- END CONTROLS -->

          <!-- PROGRESSBAR -->
          <a-entity id="progress-bar" geometry="primitive:plane;height:0.1;width:4" material="opacity:0;transparent:true;visible:false" position="-0.00457 0.835 -3.47602" rotation="0 1.2570694025170261 0" >
            <a-plane id="progress-bar-track" width="4" height="0.1" color="gray" position="" opacity="0.2" material="" visible="false" geometry=""></a-plane>
            <a-plane id="progress-bar-fill" width="2.496982785433659" height="0.1" color="#7198e5" position="-0.7515086072831705 0 0" geometry="" visible="false" material=""></a-plane>
          <!-- END PROGRESSBAR -->

    </a-scene>

    <script>

//Google Code for un-audio mute
// Existing code unchanged.
window.onload = function() {
  var context = new AudioContext();
  // Setup all nodes

}

// One-liner to resume playback when user interacted with the page.
document.querySelector('button').addEventListener('click', function() {
  context.resume().then(() => {
    console.log('Playback resumed successfully');
  });
});



      // Setup for No VR Headset first, don't use
      //document.getElementsByTagName("a-scene")[0].setAttribute('cursor', 'rayOrigin: mouse');

    
      var AVideoPlayer = function() {
      // Vals
      this.duration         = 0;
      this.current_progress = 0;
      this.progressWidth    = 4;
      this.paused           = true;
      // Elems
      this.elProgressBar   = null;
      this.elProgressTrack = null;
      this.elProgressFill  = null;
      this.elAlertSound    = null;
      this.elVideo         = null;
      this.elVideoScreen   = null;
      this.elControlBack   = null;
      this.elControlPlay   = null;
      this.elControlVolume = null;
      this._initElements = function() {
        this.elProgressBar   = document.getElementById('progress-bar');
        this.elProgressTrack = document.getElementById('progress-bar-track');
        this.elProgressFill  = document.getElementById('progress-bar-fill');
        this.elAlertSound    = document.getElementById('alert-sound');
        this.elVideo         = document.getElementById('video-src');
        this.elVideoScreen   = document.getElementById('video-screen');
        this.elControlBack   = document.getElementById('control-back');
        this.elControlPlay   = document.getElementById('control-play');
        this.elControlVolume = document.getElementById('control-volume');
      }
      /**
      * PROGRESS
      */
      this.setProgress = function(progress) {
        var new_progress = this.progressWidth*progress;
        this._setProgressWidth(new_progress);
        var progress_coord = this._getProgressCoord();
        if (progress_coord != undefined) {
         progress_coord.x = -(this.progressWidth-new_progress)/2;
         this._setProgressCoord(progress_coord);
        }
      }
      this._getProgressCoord = function() {
        return AFRAME.utils.coordinates.parse(this.elProgressFill.getAttribute("position"))
      }
      this._getProgressWidth = function() {
        return parseFloat(this.elProgressFill.getAttribute("width"));
      }
      this._setProgressCoord = function(coord) {
        this.elProgressFill.setAttribute("position", coord);
      }
      this._setProgressWidth = function(width) {
        this.elProgressFill.setAttribute("width", width);
      }
      /*
      * UI SETTERS
      */
      this.isProgressBarVisible = function(isVisible) {
        this.elProgressTrack.setAttribute("visible", isVisible);
        this.elProgressFill.setAttribute("visible", isVisible);
      }
      this.isControlVisible = function(isVisible) {
        this.elControlBack.setAttribute("visible", isVisible);
        this.elControlVolume.setAttribute("visible", isVisible);
        this.elVideoScreen.setAttribute("visible", isVisible);
      }
      /*
      * EVENTS
      */
      this._addPlayerEvents = function() {
        var that = this;
        this.elVideo.pause();
        this.elVideo.onplay = function() {
          that.duration = this.duration;
        }
        this.elVideo.ontimeupdate = function() {
          if (that.duration > 0) {
            that.current_progress = this.currentTime/that.duration;
          }
          that.setProgress(that.current_progress);
        }
      }
      this._addControlsEvent = function() {
        var that = this;
        this.elControlPlay.addEventListener('click', function () {
          that._playAudioAlert();
          if (that.elVideo.paused) {
            this.setAttribute('src', '#pause');
            that.elVideo.play();
            that.paused = false;
            that.isProgressBarVisible(true);
            that.isControlVisible(true);
          } else {
            this.setAttribute('src', '#play');
            that.elVideo.pause();
            that.paused = true;
            that.isProgressBarVisible(false);
            that.isControlVisible(false);
         }
        });
        this.elControlVolume.addEventListener('click', function () {
          that._playAudioAlert();
          if (that.elVideo.muted) {
            that.elVideo.muted = false;
            this.setAttribute('src', '#volume-normal');
          } else {
            that.elVideo.muted = true;
            this.setAttribute('src', '#volume-mute');
          }
        });
        this.elControlBack.addEventListener('click', function () {
          that._playAudioAlert();
          that.elVideo.currentTime = 0;
        });
      }
      this._addProgressEvent = function() {
        var that = this;
        this.elProgressBar.addEventListener('click', function (e) {
          if (e.detail == undefined || e.detail.intersection == undefined || that.duration === 0) {
            return;
          }
          let seekedPosition = (e.detail.intersection.point.x+(that.progressWidth/2))/that.progressWidth;
          try {
            let seekedTime = seekedPosition*that.duration;
            that.elVideo.currentTime = seekedTime;
          } catch (e) {
          }
        });
      }
      this._playAudioAlert = function() {
        if (this.elAlertSound.components !== undefined && this.elAlertSound.components.sound !== undefined) {
         this.elAlertSound.components.sound.playSound();
        }
      }
      /**
      * MOBILE PATCH TO PLAY VIDEO
      */
      this._mobileFriendly = function() {
        if (AFRAME.utils.device.isMobile()) {
          var that = this;
          let video_permission        = document.getElementById('video-permission');
         let video_permission_button = document.getElementById('video-permission-button');
          video_permission.style.display = 'block';
          video_permission_button.addEventListener("click", function() {
            video_permission.style.display = 'none';
            that.elVideo.play();
            that.elVideo.pause();
          }, false);
        }
      }
      this.init = function() {
        this._initElements();
        //this._determinateProgressWidth();
        this.setProgress(this.current_progress);
        this._addPlayerEvents();
        this._addControlsEvent();
        this._addProgressEvent();
        this._mobileFriendly();
      }
      this.init();
    }
      let scene = document.querySelector('a-scene');
      var cursor = document.querySelector('a-cursor');
      /**
      * CINEMA MODE
      */
      scene.lightOff = function() {
        scene.islightOn = true;
        scene.removeAttribute('animation__fogback');
        scene.setAttribute('animation__fog', "property: fog.color; to: #0c192a; dur: 800; easing: easeInQuad;");
      }
      scene.lightOn = function() {
        scene.islightOn = false;
        scene.removeAttribute('animation__fog');
        scene.setAttribute('animation__fogback', "property: fog.color; to: #dbdedb; dur: 800");
      }
      /**
      * AVideoPlayer
      */
      var videoPlayer = new AVideoPlayer();
      document.querySelector('#control-play').addEventListener('click', function () {
        if (videoPlayer.paused) {
          scene.lightOn()
        } else {
          scene.lightOff();
        }
      });


    </script>
</body>
</html>
